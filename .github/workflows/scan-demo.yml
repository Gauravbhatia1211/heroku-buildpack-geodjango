# This file shows you how to *use* your new module.
# Save this in your repo at: .github/workflows/scan-demo.yml

name: 'BLH Scan Demo'

on:
  push:
    branches: [ main ] # Runs when you push to main
  workflow_dispatch: # Allows you to run it manually

jobs:
  scan:
    runs-on: ubuntu-latest
    steps:
      # 1. Checkout your code so the action can scan it
      - name: Checkout code
        uses: actions/checkout@v4

      # 2. Run your new BLH Scanner
      #    We use './.github/actions/blh-scanner' if you save
      #    your module in that common directory.
      - name: Run MISS Framework BLH Scanner
        id: blh_scan
        uses: ./.github/actions/blh-scanner # <-- UPDATE THIS PATH
        # This assumes you saved the 'blh-scanner' folder
        # in '.github/actions/'
        
      # 3. Upload the JSON report as an "artifact"
      - name: Upload Scan Report
        uses: actions/upload-artifact@v4
        with:
          name: blh-report
          path: ${{ steps.blh_scan.outputs.report_path }}
